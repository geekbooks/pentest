/* C-ს ჰედერები*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <errno.h>

/* Linux-ის ჰედერები */
#include <sys/socket.h>
#include <arpa/inet.h>

int main()
{
   /* გამოყენებული ცვლადები */
   int sock, ret;
   size_t data= -1;
   struct sockaddr_in name;
   char request[64];
   char reply[1024];

   char* addr = "127.0.0.1";
   int16_t port = 80;

   /* შევქმნათ სოკეტი */
   sock = socket(AF_INET, SOCK_DGRAM, 0);
   if (sock < 0)
   {
      perror("Can't create socket");
      exit(1);
   }

   /* მივცეთ ჩვენს სოკეტს სახელი */
   name.sin_family = AF_INET;
   name.sin_port = htons(port);
   name.sin_addr.s_addr = inet_addr(addr);

   /* შევქმნათ და გავაგზავნოთ მოთხოვნა */
   strcpy(request, "AAABBBCCC");
   sendto(sock, request, strlen(request),0, (struct sockaddr *)&name,sizeof(name));

   /* მივიღოთ პასუხი და დავბეჭდოთ */
   while((data=recvfrom(sock, reply, 10000,0,NULL,NULL)) > 0)
   {
      reply[data]=0;
      printf("%s\n", reply);
   }

   return 0;
}
